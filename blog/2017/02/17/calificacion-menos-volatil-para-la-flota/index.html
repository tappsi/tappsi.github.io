
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="author" content="Tappsi" />
        <meta name="description" content="The most popular taxi app">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

        <meta property="og:title" content="Tappsi's Engineering and Technology Blog">
        <meta property="og:type" content="website">
        <meta property="og:url" content="">
        <meta property="og:image" content="/images/logo.jpg">
        <meta property="og:description" content="Pide tappsis seguros para tus clientes">

        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/stylesheets/style.css">
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
        <link href="https://fonts.googleapis.com/css?family=Noto+Sans|Radley" rel="stylesheet">
        <title>Calificación Menos Volátil Para La Flota De Tappsi - Tappsi's Engineering and Technology Blog</title>
    </head>
    <body>
        <div class="page-container">
            <header class="header">

                <div class="container">
                    <ul class="navigation inline links">
                        <li><a class="" href="http://tappsi.co">Go to Tappsi</a></li>
                    </ul>
                    <a href="/" class="brand">
                        <img src="/images/logo.svg">
                        <span>Engineering</span>
                    </a>
                </div>

            </header>

            <div class="sub-heading"></div>

            <section class="container main-content">
                <article class="post">

    <header class="post-header">
        <h1 class="post-title">Calificación menos volátil para la flota de Tappsi</h1>
        <div class="entry-meta">February 17, 2017 by <strong>Francisco Ospina</strong></div>
    </header>

    <div class="post-body">
        <p>Es frustrante cuando después de muchas buenas y exitosas carreras algunos de los tappsistas que pertenecen a la flota de Tappsi
se ven expuestos a una mala calificación. Si dicha calificación es justa o injusta no va a ser motivo de debate en esta entrada;
lo cierto es que esta calificación puede tirar por el traste un arduo trabajo no de uno sino de muchos días previos.</p>

<!--more-->


<p>Quisiera dividir está entrada en dos partes: la primera es una exposición teórica del el esquema de calificación previo y actual en la flota de tappsistas, y la segunda es cómo se ve expuesta la flota de
tappsistas a las calificaciones mediante un ejemplo real de como era el panorama con el esquema de calificaciones previo versus
nuestro esquema actual.</p>

<h3>Método de calificación previo y actual</h3>

<p>Me permiro describir el proceso de la calificación que se usaba para contextualizar y aterrizar un poco mas la idea. Previamente
la calificación de un tappsista estaba dada por el promedio de las últimas sesenta (60) calificaciones de carreras finalizadas
de forma exitosa (pasajero que es llevado a su destino), esto es lo que se define teóricamente como una media aritmética móvil,
su expresión está dada por:</p>

<p>(
 \bar{x} = \frac{1}{n} \sum_{i = 1}^n{x_i}
)</p>

<p>Donde $n$ es el número total de carreras (60) y $x_i$ es la calificación de la i-ésima carrera.</p>

<p>En la actualidad, y con la intensión hacer menos traumatica la volatilidad en lo que respecta a notas anomalas para un tappsista y
hacer un poco más estable la calificación de los taxistas implementamos una calificación que &ldquo;escucha&rdquo; mas un comportamiento global
dando menos prioridad a los casos aislados. Teóricamente dicha calificación es una media móvil ponderada que se define como:</p>

<p>(
 \bar{x} = \frac{\sum<em>{i = 1}^n{w_i x_i}}{\sum</em>{i = 1}^n{w_i}}
)</p>

<p>Donde $n$ es el número total de carreras (60), $x_i$ es la calificación de la i-ésima carrera y $w_i$ es el peso o ponderación de cada
calificación y está dado por:</p>

<p>(
 w_i = 5 - | x_i - \mu |
)</p>

<p>Con $\mu_i$ definida como la media aritmética movil ponderada calculada con la última carrera o la media móvil aritmética en caso de
no haber sido calculada la ponderada en previamente.</p>

<h3>Ejemplo real de la calificación de un taxista</h3>

<p>Una de las caracteristicas mas apreciadas para nuestros tappsistas es llamada “botón automático”, no entraré en detalles de que es
dicha carácteristica, solo voy a decir que un taxista depende de una calificación de 4,6 para acceder a dicho beneficio.</p>

<p>Poner sobre la mesa los dos conceptos anteriores (nuestra calificación y el botón automático) me permiten hacer uso de un ejemplo
para explicar la volatilidad de acceso a nuestras características sí se depende de la nota.</p>

<p>Supongamos que un tappsista tiene en sus últimas 60 calificaciones tiene 23 con un valor de 4 y 37 con un valor de 5, evidentemente es
un buen taxista; su calificación promedio (media aritmética) es de 4.61 y tiene acceso al botón automático. Si este taxista por alguna razón recibe
como calificación un uno (1) y removemos la calificación más antigua, su calificación promedio se desploma a 4.55 o 4.56 (depende si su nota más antigua es un 4 o un 5) y pierde el
botón automático. Si dicho taxista desea recuperar su calificación debe esperar a que de sus calificacionesmas antiguas salgan tres
con el valor de 4 e ingresen nuevamente tres con el valor de 5; es decir que en el mejor de los panoramas dicho tappsista recuperaría
su nota en los siguientes tres carreras (si califican sus nuevas carreras con 5 y sus carreras más antiguas fueron calificadas con 4) y el
peor de los panoramas se da cuando todas sus carreras más antiguas son 5 y los más recientes son 4, en este caso debería esperar a 40
carreras calificadas con 5 para recuperar su actual nota. Mientras que con el esquema nuevo de calificaciones no perdería el botón
automático y recuperar su nota sería un proceso menos difícil.</p>

<p>Para ilustrar con la mayor precisión posible me permito hacer un pequeño script en python que permita ver la evolución de dos taxistas
con las notas descritas en el ejemplo anterior bajo los dos esquemas de calificaciones. Escribo dos clases en python que emulan las
actualizaciones:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">math</span> <span class="kn">as</span> <span class="nn">mt</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Class that emulates the behavior of the previous rating for a tappsista</span>
</span><span class='line'><span class="k">class</span> <span class="nc">driver_previous_method_rating</span><span class="p">:</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_rating</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span> <span class="o">=</span> <span class="n">all_rating</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mean_rating</span> <span class="o">=</span> <span class="n">all_rating</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">update_rating</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rating</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span><span class="p">,</span> <span class="n">rating</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mean_rating</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># Class that emulates the behavior of the current rating for a tappsista</span>
</span><span class='line'><span class="k">class</span> <span class="nc">driver_actual_method_rating</span><span class="p">:</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_rating</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span> <span class="o">=</span> <span class="n">all_rating</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mean_rating</span> <span class="o">=</span> <span class="n">all_rating</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">weighted_rating</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">weighted_rating</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="n">weight</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span> <span class="o">-</span> <span class="n">mt</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mean_rating</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span><span class="p">]</span>
</span><span class='line'>        <span class="n">numerator</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span><span class="p">)]</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mean_rating</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">numerator</span><span class="p">)</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">update_rating</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rating</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_rating</span><span class="p">,</span> <span class="n">rating</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">weighted_rating</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Después escribo una función que simula el proceso de obtener nuevas calificaciones, la función básicamente califica al taxista con un
1, muestra cuanto fue su descenso y a continuación mira la evolución carrera a carrera (todas calificadas con 5) hasta que el tappsista
recupere su nota normal:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">test_driver_recuperation</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">35</span>
</span><span class='line'>    <span class="n">initial_rating</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">mean_rating</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&#39;Calificacion promedio inicial: {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">initial_rating</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">driver</span><span class="o">.</span><span class="n">update_rating</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&#39;Calificacion despuos de recibir un 1: {0}</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">mean_rating</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">cicle</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="k">while</span> <span class="n">driver</span><span class="o">.</span><span class="n">mean_rating</span> <span class="o">&lt;</span> <span class="n">initial_rating</span> <span class="ow">and</span> <span class="n">cicle</span> <span class="o">&lt;</span> <span class="mi">60</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">35</span>
</span><span class='line'>        <span class="n">cicle</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&#39;Carrera {0} recibe calificacion de 5&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cicle</span><span class="p">)</span>
</span><span class='line'>        <span class="n">driver</span><span class="o">.</span><span class="n">update_rating</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&#39;Calificacion promedio actual: {0}</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">mean_rating</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finalmente se crea una serie de notas simuladas y se corre el la función sobre el tappsista con el esquema de calificaciones basado en la media aritmética:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">historic_rating</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">60</span><span class="p">)</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">driver_previous_rating</span> <span class="o">=</span> <span class="n">driver_previous_method_rating</span><span class="p">(</span><span class="n">historic_rating</span><span class="p">)</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">test_driver_recuperation</span><span class="p">(</span><span class="n">driver_previous_rating</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">inicial</span><span class="p">:</span> <span class="mf">4.61666666667</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">despuos</span> <span class="n">de</span> <span class="n">recibir</span> <span class="n">un</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">1</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">2</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">3</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">4</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">5</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">6</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">7</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">8</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.55</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">9</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.56666666667</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">10</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.58333333333</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">11</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.6</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">12</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.61666666667</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hay dos efectos que quiero resaltar, el primero es que el tappsista perdió el beneficio del botón automático y la segunda es que necesita
hacer 11 carreras con calificación 5 para retormar a a la calificaión que tenía antes de recibir el 1.</p>

<p>Por otra parte si corremos la función sobre un taxista con las mismas notas pero en el esquema de calificación con la media ponderada de calificación tenemos:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">driver_actual_rating</span> <span class="o">=</span> <span class="n">driver_actual_method_rating</span><span class="p">(</span><span class="n">historic_rating</span><span class="p">)</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">test_driver_recuperation</span><span class="p">(</span><span class="n">driver_actual_rating</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">inicial</span><span class="p">:</span> <span class="mf">4.62885016566</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">despuos</span> <span class="n">de</span> <span class="n">recibir</span> <span class="n">un</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">4.6052037052</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">1</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.60240614308</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">2</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.60207477794</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">3</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.60203552297</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">4</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.61871754518</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----------------------------------</span>
</span><span class='line'><span class="n">Carrera</span> <span class="mi">5</span> <span class="n">recibe</span> <span class="n">calificacion</span> <span class="n">de</span> <span class="mi">5</span>
</span><span class='line'><span class="n">Calificacion</span> <span class="n">promedio</span> <span class="n">actual</span><span class="p">:</span> <span class="mf">4.6372917452</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finalmente acá se evidencian dos cosas, la primera es que el taxista en este caso perticular no perdió el beneficio del botón automático y la segunda es que su
recuperación se da en menos de la mitad de carreras que con el esquema previo de calificación.</p>

    </div>

    <div class="about-author">
        <img src="/images/people/francisco.jpg" alt="">
        <p>Francisco Ospina es ciefntifico de datos en Tappsi el trabaja en Python y R. En su tiempo libre le gusta aprender cosas nuevas de tecnología.</p>
    </div>

    <div class="we-are-hiring">
        <p>Tappsi is hiring talented engineers to help us improve the experience of both passengers and drivers.
            <a href="mailto:itamara@tappsi.co?subject=Engineering Jobs">Get in touch!</a>
        </p>
    </div>

    <!-- Comments -->
    <section class="comments">
        <div id="disqus_thread"></div>
    </section>

</article>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'tappsitechblog';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            </section>

        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <center>
                    © 2017 Tappsi
                    <ul class="inline">
                        <li><a href="https://web.tappsi.co">Tappsi Web</a></li>
                        <li><a href="mailto:info@tappsi.co">Email</a></li>
                    </ul>
                </center>
            </div>
        </footer>

        <!-- Add this. -->
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5890eaf58b6988f1"></script>
        <script>
            var addthis_share = addthis_share || {};
            addthis_share = {
                passthrough : {
                    twitter: {
                        via: "TappsiCo"
                    }
                }
            };
            var addthis_config = addthis_config||{};
            addthis_config.data_track_clickback = false;
        </script>

        <!-- Google Analytics. -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-51798339-3', 'auto');
            ga('send', 'pageview');
        </script>
  </body>
</html>
